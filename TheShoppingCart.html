<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/TheShoppingCart.css" />
		<style type="text/css">
			.icon {
				width: 1em;
				height: 1em;
				vertical-align: -0.15em;
				fill: currentColor;
				overflow: hidden;
		</style>
	</head>
	<body>

		<header>
			<!-- //导航 -->
			<ul class="header-ul">
				<li>
					<span id="header-ul-span">
						<svg class="icon icon-1" aria-hidden="true">
							<use xlink:href="#icon-dianhua"></use>
							<p>0500-6000000</p>
						</svg>
					</span>
					<span id="">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-shijianlishijilujishizhongbiaomianxing"></use>
							<p>上午9点至下午6点</p>
					</span>
				</li>


				<li>
					<span id="">
						<a class="login"><svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-user">
									<p>登陆</p>
								</use>
							</svg>
						</a>


					</span>
					<span id="">
						<a class="register"> <svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-likai">
									<p>注册</p>
								</use>
						</a>

					</span>
				</li>
			</ul>
			<!-- 吸顶	 -->
			<div class="xiding">
				<div id="header-2">
					<ul class="header-a-color">
						<li> <a href="">商城首页</a> </li>
						<li class="erjicaidan-1"> <a href="">商品分类</a>
							<!--导航的ul的二级菜单-1-->
							<ul class="a-color-1">
								<a href="">
									<li>美之器物</li>
								</a>
								<a href="">
									<li>南之嘉木</li>
								</a>
								<a href="">
									<li>觉之盆景</li>
								</a>
							</ul>
						</li>
						<li class="erjicaidan-2"> <a href="">支付方式</a>
							<!--导航的ul的二级菜单-2-->
							<ul class="a-color-2">
								<a href="">
									<li>在线支付</li>
								</a>
								<a href="">
									<li>银行转账</li>
								</a>
								<a href="">
									<li>货到付款</li>
								</a>
							</ul>
						</li>
						<li> <a href="">节气故事</a> </li>
						<li class="erjicaidan-3"> <a href="">关于嘉木</a>
							<!--导航的ul的二级菜单-3-->
							<ul class="a-color-3">
								<a>
									<li class="lianxi">联系我们</li>
								</a>
								<a class="jiameng">
									<li>加盟方式</li>
								</a>
							</ul>
						</li>
					</ul>
				</div>
				<div id="hidden">
					<div id="hidden-hi">
						<p><img src="img/menu.png"></p>
						<div class="hidden-2">
							<a href="index.html"><img src="img/logo.png"></a>
						</div>

						<span>
							<a href=""><svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-dianhua"></use>
								</svg></a>
							<a href=""><svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-user"></use>
								</svg></a>
							<a href=""><svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-liwu"></use>
								</svg></a>

						</span>
					</div>

				</div>
			</div>

		</header>
		<!-- 隐藏的头 -->
		<div id="hidden">
			<div id="hidden-hi">
				<p><img src="img/menu.png"></p>
				<div class="hidden-2">
					<a href="index.html"><img src="img/logo.png"></a>
				</div>

				<span>
					<a href=""><svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-dianhua"></use>
						</svg></a>
					<a href=""><svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-user"></use>
						</svg></a>
					<a href=""><svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-liwu"></use>
						</svg></a>

				</span>
			</div>

		</div>

		<!-- 第二个头 -->
		<div id="header-2">
			<a href="index.html"><img src="img/logo.png"></a>
			<ul class="header-a-color">
				<li> <a href="" class="yan">商城首页</a> </li>
				<li class="tou-1"> <a href="">商品分类</a>
					<!--导航的ul的二级菜单-1-->
					<ul class="a-color-1">
						<a href="">
							<li>美之器物</li>
						</a>
						<a href="">
							<li>南之嘉木</li>
						</a>
						<a href="">
							<li>觉之盆景</li>
						</a>
					</ul>
				</li>
				<li class="tou-2"> <a href="">支付方式</a>
					<!--导航的ul的二级菜单-2-->
					<ul class="a-color-2">
						<a href="">
							<li>在线支付</li>
						</a>
						<a href="">
							<li>银行转账</li>
						</a>
						<a href="">
							<li>货到付款</li>
						</a>
					</ul>
				</li>
				<li> <a href="" class="yan">节气故事</a> </li>
				<li class="tou-3"> <a href="">关于嘉木</a>
					<!--导航的ul的二级菜单-3-->
					<ul class="a-color-3">
						<a>
							<li class="lianxi">联系我们</li>
						</a>
						<a class="jiameng">
							<li>加盟方式</li>
						</a>
					</ul>
				</li>
			</ul>

			<span>
				<input type="" name="" id="" value placeholder="嘉木/盆景/文玩" />
				<a href="">
					<p>搜索</p>
				</a>
			</span>
		</div>








		<section>
		
				
			<style>
			       .the-shopping{
					   width: 70%;
					   background-color: antiquewhite;
					   margin: 0 auto;
				.del{
					background-color: #0000FF;
				}
			    </style>
			</head>
			
			<body>
			    <div class="the-shopping">
			      <div class="shopping-left">
			      	<ul>
			      		<li>商品</li>
						<li>价格</li>
						<li>数量</li>
						<li>合计</li>
			      	</ul>
					<div class="del">
						<input type="button" value="删除" class="del">
						单价：<span class="goods-price">15</span>
						<button>-</button><span class="goods-num">1</span><button id="text">+</button>
						小计<span class="goods-single-price">0</span>
					</div>
					
					
					
					
			      </div>
			    </div>
			</body>	
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		
			
		</section>


		

















		<!-- 尾部 -->
		<footer>
			<div id="footer-end">


				<div class="footer-1">
					<img src="img/logo.png">
				</div>
				<ul class="footer-ul-1">

					<li> 支付方式</li>
					<li> 支付方式</li>
					<li> 支付方式</li>
				</ul>
				<div class="footer-2">



					<ul class="footer-ul">


						<li><a href="">在线支付</a></li>
						<li><a href="">货到付款</a></li>
						<li><a href="">银行转账</a></li>
					</ul>

					<ul class="footer-ul">

						<li><a href="">在线支付</a></li>
						<li><a href="">货到付款</a></li>
						<li><a href="">银行转账</a></li>
					</ul>

					<ul class="footer-ul">

						<li><a href="">在线支付</a></li>
						<li><a href="">货到付款</a></li>
						<li><a href="">银行转账</a></li>
					</ul>
				</div>
				<span>Copyright © 2010-2015 南之嘉木茶文化有限公司. All rights reserved.</span>
			</div>
		</footer>
	</body>
</html>
<script src="jQuery.js" type="text/javascript" charset="utf-8"></script>
<script src="index.js" type="text/javascript" charset="utf-8"></script>
<script src="font_oeezlgigfj9/iconfont.js"></script>




<script type="text/javascript">
    class cart {
        //商品的总数量
        getGoodsNumAndUpdate() {
            //商品总数量
            let oGoods = document.getElementsByClassName("goods-num");
            let oGoodsnum = 0;
            for (let i = 0; i < oGoods.length; i++) {
                oGoodsnum += Number(oGoods[i].innerHTML);
            }
            let goodsTotal = document.querySelector("#goods-total-num");
            goodsTotal.innerHTML = oGoodsnum;
        }
        goodsSinglePrice() {
                let oGoodsPrice = document.getElementsByClassName("goods-single-price");
                let oGoodsnum = 0;
                for (let i = 0; i < oGoodsPrice.length; i++) {
                    oGoodsnum += Number(oGoodsPrice[i].innerHTML);
                }
                let goodsTotal = document.querySelector("#goods-total-num");
                goodsTotal.nextElementSibling.innerHTML = oGoodsnum;
            }
            //小计
        goodsPrice(num1, price) {
            return num1 * price;
        }
        goodsAdd(obt) {
            let oGoodsum = obt.previousElementSibling;
            oGoodsum.innerHTML = Number(oGoodsum.innerHTML) + 1;
            //获取单价节点
            let oGoodprace = obt.parentNode.nextElementSibling.firstElementChild;
            //获取小计
            let oGoodP = this.goodsPrice(Number(oGoodsum.innerHTML), Number(oGoodprace.innerHTML));
            let ogoodsilingprace = obt.parentNode.nextElementSibling.nextElementSibling.firstElementChild;
            ogoodsilingprace.innerHTML = oGoodP;
            this.getGoodsNumAndUpdate();
            this.goodsSinglePrice();
        }
        goodsjian(obt) {
            let oGoodsum = obt.nextElementSibling;
            if (Number(oGoodsum.innerHTML) > 0) {
                oGoodsum.innerHTML = oGoodsum.innerHTML - 1;
            }
            //获取单价节点
            let oGoodprace = obt.parentNode.nextElementSibling.firstElementChild;
            //获取小计
            let oGoodP = this.goodsPrice(Number(oGoodsum.innerHTML), Number(oGoodprace.innerHTML));
            let ogoodsilingprace = obt.parentNode.nextElementSibling.nextElementSibling.firstElementChild;
            ogoodsilingprace.innerHTML = oGoodP;
            this.getGoodsNumAndUpdate();
            this.goodsSinglePrice();
        }
        remov(obt1) {
            let a = obt1.parentNode.parentNode;
            a.remove();
            this.getGoodsNumAndUpdate();
            this.goodsSinglePrice();
        }
        eventBind() {
                let obt = document.querySelectorAll("button");
                let omove = document.querySelectorAll(".del");
                let that = this;
                for (let i = 0; i < obt.length; i++) {
                    if (i % 2 == 0) {
                        obt[i].onclick = function() {
                            that.goodsjian(this);
                        }
                    } else {
                        obt[i].onclick = function() {
                            that.goodsAdd(this);
                        }
                    }
                }
                for (let i = 0; i < omove.length; i++) {
                    omove[i].onclick = function() {
                        that.remov(this);
                    }
                }
            }
            //添加菜单
        addcai() {
            let oadd = document.querySelectorAll(".add");
            let omove = document.querySelectorAll(".del");
            let that = this;

            for (let i = 0; i < oadd.length; i++) {
                oadd[i].onclick = function() {
                    let oadd = document.querySelectorAll(".add");
                    let omove = document.querySelectorAll(".del");
                    let qqqq = false;
                    let a = this.parentNode.parentNode.firstElementChild;

                    for (let j = 0; j < omove.length; j++) {
                        let b = omove[j].parentNode.parentNode.firstElementChild
                        if (a.innerHTML == b.innerHTML) {
                            let c = omove[j].parentNode.parentNode.firstElementChild.nextElementSibling.lastElementChild;
                            qqqq = true;
                            that.goodsAdd(c);
                        }

                    }

                    if (qqqq == false) {
                        let oadd = document.querySelectorAll(".add");
                        let omove = document.querySelectorAll(".del");
                        let otrr = document.querySelector("#trr");
                        let otable = document.querySelectorAll("table");
                        let lasttr = otable[0].querySelectorAll("tr");
                        let last1 = lasttr[lasttr.length - 1]
                        let lastr = lasttr[lasttr.length - 2];

                        let addtr = document.createElement("tr");
                        addtr.innerHTML = lastr.innerHTML;
                        addtr.firstElementChild.innerHTML = this.parentNode.parentNode.firstElementChild.innerHTML;
                        addtr.firstElementChild.nextElementSibling.firstElementChild.nextElementSibling.innerHTML = 1;
                        addtr.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild.innerHTML = this.parentNode.previousElementSibling.firstElementChild.innerHTML;
                        last1.before(addtr);

                        that.getGoodsNumAndUpdate();
                        that.goodsSinglePrice();
                        that.eventBind();
                    }
                }
            }
        }
    }
    let ocart = new cart();
    ocart.eventBind();
    ocart.addcai();
</script>
