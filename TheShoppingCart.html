<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/TheShoppingCart.css" />
		<style type="text/css">
			.icon {
				width: 1em;
				height: 1em;
				vertical-align: -0.15em;
				fill: currentColor;
				overflow: hidden;
		</style>
	</head>
	<body>

		<header>
			<!-- //导航 -->
			<ul class="header-ul">
				<li>
					<span id="header-ul-span">
						<svg class="icon icon-1" aria-hidden="true">
							<use xlink:href="#icon-dianhua"></use>
							<p>0500-6000000</p>
						</svg>
					</span>
					<span id="">
						<svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-shijianlishijilujishizhongbiaomianxing"></use>
							<p>上午9点至下午6点</p>
					</span>
				</li>


				<li>
					<span id="">
						<a class="login"><svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-user">
									<p>登陆</p>
								</use>
							</svg>
						</a>


					</span>
					<span id="">
						<a class="registered"> <svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-likai">
									<p>注册</p>
								</use>
						</a>

					</span>
				</li>
			</ul>
			<!-- 吸顶	 -->
			<div class="xiding">
				<div id="header-2">
					<ul class="header-a-color">
						<li> <a class="Dshouye">商城首页</a> </li>
						<li class="erjicaidan-1"> <a class="classification">商品分类</a>
							<!--导航的ul的二级菜单-1-->
							<ul class="a-color-1">
								<a href="">
									<li>美之器物</li>
								</a>
								<a href="">
									<li>南之嘉木</li>
								</a>
								<a href="">
									<li>觉之盆景</li>
								</a>
							</ul>
						</li>
						<li class="erjicaidan-2"> <a class="zhifufangshi">支付方式</a>
							<!--导航的ul的二级菜单-2-->
							<ul class="a-color-2">
								<a class="zhifufangshi">
									<li>在线支付</li>
								</a>
								<a href="">
									<li>银行转账</li>
								</a>
								<a href="">
									<li>货到付款</li>
								</a>
							</ul>
						</li>
						<li> <a  class="yan">节气故事</a> </li>
						<li class="erjicaidan-3"> <a class="guanyu">关于嘉木</a>
							<!--导航的ul的二级菜单-3-->
							<ul class="a-color-3">
								<a>
									<li class="lianxi">联系我们</li>
								</a>
								<a class="jiameng">
									<li>加盟方式</li>
								</a>
							</ul>
						</li>
					</ul>
				</div>
				<div id="hidden">
					<div id="hidden-hi">
						<p><img src="img/menu.png"></p>
						<div class="hidden-2">
							<a href="index.html"><img src="img/logo.png"></a>
						</div>

						<span>
							<a href=""><svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-dianhua"></use>
								</svg></a>
							<a href=""><svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-user"></use>
								</svg></a>
							<a href=""><svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-liwu"></use>
								</svg></a>

						</span>
					</div>

				</div>
			</div>

		</header>
		<!-- 隐藏的头 -->
		<div id="hidden">
			<div id="hidden-hi">
				<p><img src="img/menu.png"></p>
				<div class="hidden-2">
					<a href="index.html"><img src="img/logo.png"></a>
				</div>

				<span>
					<a href=""><svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-dianhua"></use>
						</svg></a>
					<a href=""><svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-user"></use>
						</svg></a>
					<a href=""><svg class="icon" aria-hidden="true">
							<use xlink:href="#icon-liwu"></use>
						</svg></a>

				</span>
			</div>

		</div>

		<!-- 第二个头 -->
		<div id="header-2">
			<a href="index.html"><img src="img/logo.png"></a>
			<ul class="header-a-color">
				<li> <a class="Dshouye" >商城首页</a> </li>
				<li class="tou-1"> <a class="classification">商品分类</a>
					<!--导航的ul的二级菜单-1-->
					<ul class="a-color-1">
						<a href="">
							<li>美之器物</li>
						</a>
						<a href="">
							<li>南之嘉木</li>
						</a>
						<a href="">
							<li>觉之盆景</li>
						</a>
					</ul>
				</li>
				<li class="tou-2"> <a class="zhifufangshi">支付方式</a>
					<!--导航的ul的二级菜单-2-->
					<ul class="a-color-2">
						<a class="zhifufangshi">
							<li>在线支付</li>
						</a>
						<a class="zhifufangshi">
							<li>银行转账</li>
						</a>
						<a class="zhifufangshi">
							<li>货到付款</li>
						</a>
					</ul>
				</li>
				<li> <a class="yan">节气故事</a> </li>
				<li class="tou-3"> <a class="guanyu">关于嘉木</a>
					<!--导航的ul的二级菜单-3-->
					<ul class="a-color-3">
						<a>
							<li class="lianxi">联系我们</li>
						</a>
						<a class="jiameng">
							<li>加盟方式</li>
						</a>
					</ul>
				</li>
			</ul>

			<span>
				<input type="" name="" id="" value placeholder="嘉木/盆景/文玩" />
				<a class="suosou">
					<p>搜索</p>
				</a>
			</span>
		</div>












		<section>
		
		<div class="the-shopping">
			<div class="the-shopping-left">
		   <table border="0" class="border-1">
		   	<tr>
				<td>商品</td>
				<td>数量</td>
				<td>价格</td>				
				<td>合计</td>
				</tr>
		  
		   </table>
		
				<table border="0" class="border-2">
		
					<tr>
						<td><input type="button" value="删除" class="del"></button>
						<td> <img src="img/a5.png" ></td>
						<td>柴烧花器</td>
						<td><button>-</button><span class="goods-num">1</span><button id="text">+</button></td>
						<td>价格：<span class="goods-price">17</span></td>
						<td>合计<span class="goods-single-price">17</span></td>
						</td>
					</tr>
					<tr>
						<td><input type="button" value="删除" class="del"></button>
							<td> <img src="img/a1.png" ></td>
						<td>公道杯</td>
						<td><button>-</button><span class="goods-num">1</span><button id="text">+</button></td>
						<td>价格：<span class="goods-price">12</span></td>
						<td>合计<span class="goods-single-price">12</span></td>
						</td>
					</tr>
					
					
					
				</table>
			
		</div>
		<div class="the-shopping-right">
			<table border="0" cellspacing="" cellpadding="";">
			
				<tr>
					<td>购物车总计</td>
				</tr>
				<tr>
					<td colspan="0"><span id="goods-total-num" style="display: none;">0</span>共计花费<span>0</span>元</td>
				</tr>
				<tr>
					<td> 运费
						<span id="goods-total-num">免费送货</span>
					</td>
				</tr>
				<tr>
					<td> 订单总计
						￥<span id="goods-total-num-1">0.00</span>
					</td>
				</tr>
				<tr>
					<td>
						<button type="button" class="mui-btn-blue">付钱</button>
					</td>
				</tr>
				<tr>
					<td> 优惠券 </td>
				</tr>
				<tr>
					<td> <input type="" name="" class="mui-btn"  value="" /> </td>
		
				</tr>
				<tr>
					<td> <button type="button" class="muiblue">按钮</button></td>
		
				</tr>
			</table>
		</div>
			</div>
				
				
				
				
		
			
		</section>


		

















		<!-- 尾部 -->
		<footer>
			<div id="footer-end">


				<div class="footer-1">
					<img src="img/logo.png">
				</div>
				<ul class="footer-ul-1">

					<li> 支付方式</li>
					<li> 支付方式</li>
					<li> 支付方式</li>
				</ul>
				<div class="footer-2">



					<ul class="footer-ul">


						<li><a class="zhifufangshi">在线支付</a></li>
						<li><a class="zhifufangshi">货到付款</a></li>
						<li><a class="zhifufangshi">银行转账</a></li>
					</ul>

					<ul class="footer-ul">

						<li><a class="zhifufangshi">在线支付</a></li>
						<li><a class="zhifufangshi">货到付款</a></li>
						<li><a class="zhifufangshi">银行转账</a></li>
					</ul>

					<ul class="footer-ul">
						<li><a class="zhifufangshi">在线支付</a></li>
						<li><a class="zhifufangshi">货到付款</a></li>
						<li><a class="zhifufangshi">银行转账</a></li>
					</ul>
				</div>
				<span>Copyright © 2010-2015 南之嘉木茶文化有限公司. All rights reserved.</span>
			</div>
		</footer>
	</body>
</html>
<script src="jQuery.js" type="text/javascript" charset="utf-8"></script>
<script src="index.js" type="text/javascript" charset="utf-8"></script>
<script src="font_oeezlgigfj9/iconfont.js"></script>

<script type="text/javascript">
	class cart {
		//商品的总数量
		getGoodsNumAndUpdate() {
			//商品总数量
			let oGoods = document.getElementsByClassName("goods-num");
			let oGoodsnum = 0;
			for (let i = 0; i < oGoods.length; i++) {
				oGoodsnum += Number(oGoods[i].innerHTML);
			}
			let goodsTotal = document.querySelector("#goods-total-num");
			goodsTotal.innerHTML = oGoodsnum;

		}
		goodsSinglePrice() {
			let oGoodsPrice = document.getElementsByClassName("goods-single-price");
			let oGoodsnum = 0;
			for (let i = 0; i < oGoodsPrice.length; i++) {
				oGoodsnum += Number(oGoodsPrice[i].innerHTML);
			}
			let goodsTotal = document.querySelector("#goods-total-num");
			goodsTotal.nextElementSibling.innerHTML = oGoodsnum;
			let goodsTotaltwo = document.querySelector("#goods-total-num-1");
			goodsTotaltwo.innerHTML = oGoodsnum;
		}
		//小计
		goodsPrice(num1, price) {
			return num1 * price;
		}
		goodsAdd(obt) {
			let oGoodsum = obt.previousElementSibling;
			oGoodsum.innerHTML = Number(oGoodsum.innerHTML) + 1;
			//获取单价节点
			let oGoodprace = obt.parentNode.nextElementSibling.firstElementChild;
			//获取小计
			let oGoodP = this.goodsPrice(Number(oGoodsum.innerHTML), Number(oGoodprace.innerHTML));
			let ogoodsilingprace = obt.parentNode.nextElementSibling.nextElementSibling.firstElementChild;
			ogoodsilingprace.innerHTML = oGoodP;
			this.getGoodsNumAndUpdate();
			this.goodsSinglePrice();
		}
		goodsjian(obt) {
			let oGoodsum = obt.nextElementSibling;
			if (Number(oGoodsum.innerHTML) > 0) {
				oGoodsum.innerHTML = oGoodsum.innerHTML - 1;
			}
			//获取单价节点
			let oGoodprace = obt.parentNode.nextElementSibling.firstElementChild;
			//获取小计
			let oGoodP = this.goodsPrice(Number(oGoodsum.innerHTML), Number(oGoodprace.innerHTML));
			let ogoodsilingprace = obt.parentNode.nextElementSibling.nextElementSibling.firstElementChild;
			ogoodsilingprace.innerHTML = oGoodP;
			this.getGoodsNumAndUpdate();
			this.goodsSinglePrice();
		}
		remov(obt1) {
			let a = obt1.parentNode.parentNode;
			a.remove();
			this.getGoodsNumAndUpdate();
			this.goodsSinglePrice();
		}
		eventBind() {
			let obt = document.querySelectorAll("button");
			let omove = document.querySelectorAll(".del");
			let that = this;
			for (let i = 0; i < obt.length; i++) {
				if (i % 2 == 0) {
					obt[i].onclick = function() {
						that.goodsjian(this);
					}
				} else {
					obt[i].onclick = function() {
						that.goodsAdd(this);
					}
				}
			}
			for (let i = 0; i < omove.length; i++) {
				omove[i].onclick = function() {
					that.remov(this);
				}
			}
		}
	
		addcai() {
			let oadd = document.querySelectorAll(".add");
			let omove = document.querySelectorAll(".del");
			let that = this;

			for (let i = 0; i < oadd.length; i++) {
				oadd[i].onclick = function() {
					let oadd = document.querySelectorAll(".add");
					let omove = document.querySelectorAll(".del");
					let qqqq = false;
					let a = this.parentNode.parentNode.firstElementChild;

					for (let j = 0; j < omove.length; j++) {
						let b = omove[j].parentNode.parentNode.firstElementChild
						if (a.innerHTML == b.innerHTML) {
							let c = omove[j].parentNode.parentNode.firstElementChild.nextElementSibling.lastElementChild;
							qqqq = true;
							that.goodsAdd(c);
						}

					}

					if (qqqq == false) {
						let oadd = document.querySelectorAll(".add");
						let omove = document.querySelectorAll(".del");
						let otrr = document.querySelector("#trr");
						let otable = document.querySelectorAll("table");
						let lasttr = otable[0].querySelectorAll("tr");
						let last1 = lasttr[lasttr.length - 1]
						let lastr = lasttr[lasttr.length - 2];

						let addtr = document.createElement("tr");
						addtr.innerHTML = lastr.innerHTML;
						addtr.firstElementChild.innerHTML = this.parentNode.parentNode.firstElementChild.innerHTML;
						addtr.firstElementChild.nextElementSibling.firstElementChild.nextElementSibling.innerHTML = 1;
						addtr.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.firstElementChild.innerHTML =
							this.parentNode.previousElementSibling.firstElementChild.innerHTML;
						last1.before(addtr);

						that.getGoodsNumAndUpdate();
						that.goodsSinglePrice();
						that.eventBind();
					}
				}
			}
		}
	}
	let ocart = new cart();
	ocart.eventBind();
	ocart.addcai();
	
	
	
</script>



